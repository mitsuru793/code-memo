---
---
{
  {% assign categories = site.codes | map: 'categories' | join: ',' | split: ',' | uniq %}
  "categories" : [
    {% for tag in categories %}
      {% assign count = 0 %}
      {% for post in site.codes %}
        {% if post.categories contains tag %}
          {% assign count = count | plus: 1 %}
        {% endif %}
      {% endfor %}
      ["{{ tag }}","{{ count }}"]{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ],

  {% assign tags = site.codes | map: 'tags' | join: ',' | split: ',' | uniq %}
  "tags" : [
    {% for tag in tags %}
      {% assign count = 0 %}
      {% for post in site.codes %}
        {% if post.tags contains tag %}
          {% assign count = count | plus: 1 %}
        {% endif %}
      {% endfor %}
      ["{{ tag }}","{{ count }}"]{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ]
}
